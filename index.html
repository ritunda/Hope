<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImpactSeed - Real-Time Hope Tracker</title>
    <style>
        :root {
            --hope-green: #00cc66;
            --impact-orange: #ff6600;
            --text-dark: #2c3e50;
        }

        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .profile-section {
            background: rgba(255,255,255,0.9);
            padding: 1rem;
            margin: 1rem;
            border-radius: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header {
            background: var(--hope-green);
            padding: 2rem;
            text-align: center;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .impact-counter {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            padding: 2rem;
            background: white;
            margin: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .tap-area {
            width: 200px;
            height: 200px;
            background: var(--impact-orange);
            border-radius: 50%;
            margin: 2rem auto;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            transition: transform 0.1s;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .progress-bar {
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 2rem;
        }

        .data-export {
            text-align: center;
            margin: 2rem;
            padding: 1rem;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
        }

        input[type="text"], input[type="tel"] {
            padding: 0.8rem;
            margin: 0.5rem;
            border: 2px solid var(--hope-green);
            border-radius: 25px;
            width: 200px;
        }

        button {
            background: var(--hope-green);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            margin: 0.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .live-counter {
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-dark);
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="profile-section">
        <h3>üôå Your Hope Identity</h3>
        <input type="text" id="username" placeholder="Blessed Name">
        <input type="tel" id="phone" placeholder="2547XXXXXXXX" pattern="[0-9]{10}">
        <button onclick="saveProfile()">Save Kingdom Profile</button>
    </div>

    <div class="header">
        <h1>ImpactSeed üåç</h1>
        <p>1 Tap = 1 Hope Unit (KSH Equivalent)</p>
        <div class="live-counter">
            Total Hope: <span id="live-taps">0</span> KSH
        </div>
    </div>

    <div class="impact-counter">
        <div class="impact-item" style="background: #ffe066;">
            <h3>üç≤ Meals Provided</h3>
            <div id="meals-counter">0</div>
        </div>
        <div class="impact-item" style="background: #69db7c;">
            <h3>üìö Education Kits</h3>
            <div id="education-counter">0</div>
        </div>
        <div class="impact-item" style="background: #74c0fc;">
            <h3>üëï Clothing Bundles</h3>
            <div id="clothing-counter">0</div>
        </div>
        <div class="impact-item" style="background: #d8f5a2;">
            <h3>üìñ Bibles Distributed</h3>
            <div id="bible-counter">0</div>
        </div>
    </div>

    <div class="progress-bar">
        <div class="progress-fill" id="global-progress"></div>
    </div>

    <div class="tap-area" onclick="generateImpact()">
        TAP TO SOW HOPE
    </div>

    <div style="text-align: center; margin: 2rem;">
        <button onclick="convertImpact('food')" style="background: #ffe066;">üç≤ Convert to Food</button>
        <button onclick="convertImpact('education')" style="background: #69db7c;">üéì School Kits</button>
        <button onclick="convertImpact('bible')" style="background: #d8f5a2;">üìñ Print Bible</button>
    </div>

    <div class="data-export">
        <input type="file" id="importFile" style="display:none;">
        <button onclick="document.getElementById('importFile').click()">üì• Import Impact</button>
        <button onclick="exportData()">üì§ Export Impact</button>
        <p>Total Hope Seeds: <span id="total-taps">0</span> KSH</p>
    </div>

    <div style="text-align: center; padding: 2rem;">
        <button onclick="donateViaMPesa()" style="background: var(--hope-green); color: white; padding: 1rem 2rem;">
            DIRECT DONATE VIA MPESA
        </button>
        <p style="margin-top: 2rem; color: var(--text-dark);">
            "For I was hungry and you gave me something to eat..." - Matthew 25:35<br>
            Every 1000 taps = 1 meal provided to a child in need
        </p>
    </div>

    <script>
        let impactData = JSON.parse(localStorage.getItem('impactData')) || {
            user: { name: '', phone: '' },
            taps: 0,
            conversions: {
                meals: 0,
                education: 0,
                clothing: 0,
                bibles: 0
            },
            rates: {
                meal: 1000,
                education: 5000,
                clothing: 3000,
                bible: 2000
            }
        };

        function saveProfile() {
            impactData.user = {
                name: document.getElementById('username').value,
                phone: document.getElementById('phone').value
            };
            localStorage.setItem('impactData', JSON.stringify(impactData));
            alert('Kingdom identity saved!');
        }

        function generateImpact() {
            impactData.taps++;
            updateDisplay();
            checkAutoConversions();
            localStorage.setItem('impactData', JSON.stringify(impactData));
            document.querySelector('.tap-area').style.transform = 'scale(0.95)';
            setTimeout(() => {
                document.querySelector('.tap-area').style.transform = 'scale(1)';
            }, 100);
        }

        function checkAutoConversions() {
            // Automatic conversions when thresholds are reached
            while(impactData.taps >= impactData.rates.meal) {
                impactData.conversions.meals++;
                impactData.taps -= impactData.rates.meal;
            }
            while(impactData.taps >= impactData.rates.education) {
                impactData.conversions.education++;
                impactData.taps -= impactData.rates.education;
            }
            while(impactData.taps >= impactData.rates.clothing) {
                impactData.conversions.clothing++;
                impactData.taps -= impactData.rates.clothing;
            }
            while(impactData.taps >= impactData.rates.bible) {
                impactData.conversions.bibles++;
                impactData.taps -= impactData.rates.bible;
            }
        }

        function convertImpact(type) {
            const required = impactData.rates[type];
            if(impactData.taps >= required) {
                impactData.taps -= required;
                impactData.conversions[type]++;
                alert(`Converted to ${type}! ${required} hope seeds planted!`);
                updateDisplay();
                localStorage.setItem('impactData', JSON.stringify(impactData));
            } else {
                alert(`Need ${required - impactData.taps} more seeds!`);
            }
        }

        function updateDisplay() {
            // Update all counters in real-time
            document.getElementById('live-taps').textContent = impactData.taps.toLocaleString();
            document.getElementById('total-taps').textContent = impactData.taps.toLocaleString();
            document.getElementById('meals-counter').textContent = impactData.conversions.meals.toLocaleString();
            document.getElementById('education-counter').textContent = impactData.conversions.education.toLocaleString();
            document.getElementById('clothing-counter').textContent = impactData.conversions.clothing.toLocaleString();
            document.getElementById('bible-counter').textContent = impactData.conversions.bibles.toLocaleString();
            
            // Update progress bar
            const progress = (impactData.taps % 10000) / 10000 * 100;
            document.getElementById('global-progress').style.width = `${progress}%`;
        }

        function exportData() {
            const data = JSON.stringify(impactData);
            const encrypted = btoa(unescape(encodeURIComponent(data)));
            const blob = new Blob([encrypted], {type: 'text/plain'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ImpactSeed_${impactData.user.name || 'Anonymous'}_${Date.now()}.enc`;
            link.click();
        }

        document.getElementById('importFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const decrypted = decodeURIComponent(escape(atob(e.target.result)));
                    impactData = JSON.parse(decrypted);
                    localStorage.setItem('impactData', JSON.stringify(impactData));
                    updateDisplay();
                    alert('Impact harvest restored!');
                } catch(error) {
                    alert('Invalid impact file format');
                }
            };
            reader.readAsText(file);
        });

        function donateViaMPesa() {
            const amount = prompt("Enter amount in KSH:");
            if(amount > 0) {
                alert(`Donate via MPesa:\n1. Go to Lipa Na MPesa\n2. Till Number: 0113194977\n3. Amount: ${amount} KSH\n4. Reference: IMPACT${amount}`);
            }
        }

        // Initial load
        document.getElementById('username').value = impactData.user.name;
        document.getElementById('phone').value = impactData.user.phone;
        updateDisplay();
        
        // Community impact simulation
        setInterval(() => {
            impactData.conversions.meals += Math.floor(Math.random() * 3);
            impactData.conversions.education += Math.floor(Math.random() * 2);
            impactData.conversions.clothing += Math.floor(Math.random() * 4);
            impactData.conversions.bibles += Math.floor(Math.random() * 1);
            updateDisplay();
            localStorage.setItem('impactData', JSON.stringify(impactData));
        }, 10000);
    </script>
</body>
</html>
